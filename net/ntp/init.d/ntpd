#!/bin/bash
#
# ntp
# chkconfig: 345 31 69
# description: NTP is used to synchronize computer clocks
#  on a connected network or via GPS/phone/etc.
# processname: ntpd
# config: /etc/ntp.conf

ARGS="-g"
[ -e "/etc/ntp.conf" ] && ARGS="$ARGS -c /etc/ntp.conf"

stop () {
        if [ -x /sbin/hwclock ] ; then
          # Save the time to hw clock
          echo -n "Saving system time to hardware clock ... "
          if /sbin/hwclock --systohc ; then
            echo -e $RESULT_OK
          else
            echo -e $RESULT_FAIL
          fi
        else
          echo -n "hwclock is missing! Can't set hardware clock! "
          echo -e $RESULT_WARN
        fi
        # Stop the real thing
        default_stop
}

reload () {
	# ntp is not reload-safe
	$0 restart
}

. /lib/lsb/init-functions
